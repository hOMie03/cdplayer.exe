<div class="player-container">

    <!-- Info Header restored as Title Bar -->
    <div class="w98-title-bar player-inner-header">
        <div class="w98-title-bar-text">Now Playing - {{ currentSong?.title }}</div>
        <div class="w98-title-bar-controls">
            <button (click)="backToBook()">X</button>
        </div>
    </div>

    <div class="player-content">
        <!-- Left / Top: CD -->
        <div class="cd-section">
            <!-- Binding rotation style directly -->
            <div class="spinning-cd" #spinningCd>
                <img [src]="currentSong?.cover || 'assets/default-cd.png'" alt="Cover">
                <div class="cd-hole"></div>
            </div>
        </div>

        <!-- Right / Bottom: Controls -->
        <div class="controls-section">
            <div class="track-info w98-sunken">
                <div class="info-line"><strong>Title:</strong> {{ currentSong?.title }}</div>
                <div class="info-line"><strong>Artist:</strong> {{ currentSong?.artist }}</div>
                <div class="time-display">
                    {{ formatTime(audio.currentTime()) }} / {{ formatTime(audio.duration()) }}
                </div>
            </div>

            <div class="seek-bar-container">
                <input type="range" [min]="0" [max]="audio.duration()" [value]="audio.currentTime()"
                    (input)="seek($event)" class="seek-slider">
            </div>

            <div class="buttons-row">
                <button class="w98-btn control-btn" (click)="prev()" [disabled]="currentIndex() === 0">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                    </svg>
                </button>

                <button class="w98-btn control-btn play-btn" (click)="togglePlay()">
                    @if (audio.isPlaying()) {
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                    </svg>
                    } @else {
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    }
                </button>

                <button class="w98-btn control-btn" (click)="next()"
                    [disabled]="currentIndex() >= library.songs().length - 1">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
                    </svg>
                </button>

                <button class="w98-btn control-btn" (click)="backToBook()">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 6h12v12H6z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>